{"version":3,"sources":["webpack:///app.bundle.js","webpack:///./src/attachmentsUiHandler.js"],"names":["webpackJsonpattachmentsUiHandler","e","a","attachmentsUiHandler","self","this","_resizePublisher","Sfdc","canvas","publisher","resize","height","document","body","scrollHeight","_drawAttachments","handler","tbody","jQuery","attachments","forEach","attachmentWrapper","counter","row","_buildRow","append","isUploading","_buildTableRow","drawCheckboxes","isChecked","selectedAttachmentsIds","push","att","Id","checkbox","_buildTableColumnCheckbox","fileNameColumn","_buildTableColumnFileName","attr","td","find","prop","bind","_handleLineItemSelection","asLink","attachment","fileNameMarkup","url","getRelatedAttachDownloadBaseUrl","text","Name","innerHtml","getAttachmentFileLabel","container","spinner","_buildSpinner","addClass","_showErrorMsg","message","toggleClass","_hideErrorMessage","module","exports"],"mappings":"AAAAA,kCAAkC,IAAI,SAASC,EAAEC,GCKjD,GAAAC,GAAA,eAEA,GAAAC,GAAAC,IAKAD,GAAAE,iBAAA,WAEAC,WAAAC,QAAAD,KAAAC,OAAAC,WAEAF,KAAAC,OAAAC,UAAAC,QAAkCC,OAAAC,SAAAC,KAAAC,aAAA,QAOlCV,EAAAW,iBAAA,SAAAC,GAEA,GAAAC,GAAAC,OAAA,sCACAF,GAAAG,YAAAC,QAAA,SAAAC,GAGAA,EAAAC,QAAAlB,EAAAkB,SAEA,IAAAC,GAAAnB,EAAAoB,UAAAH,KAEAJ,GAAAQ,OAAAF,MAOAnB,EAAAoB,UAAA,SAAAH,EAAAK,EAAAV,GAEA,GAAAO,GAAAnB,EAAAuB,gBACA,IAAAC,mBAAAF,EACA,CACAL,EAAAQ,WAEAb,EAAAc,uBAAAC,KAAAV,EAAAW,IAAAC,GAEA,IAAAC,GAAA9B,EAAA+B,0BAAAd,EAAAL,EACAO,GAAAE,OAAAS,GAGA,GAAAE,GAAAhC,EAAAiC,2BAAAX,EAAAL,EAAAK,EAaA,OAZAE,mBAAAF,GAEAU,EAAAE,KAAA,eAEAf,EAAAE,OAAAW,GAGAV,GAEAH,EAAAe,KAAA,eAAAtB,EAAAM,WAGAC,GAMAnB,EAAAuB,eAAA,WAEA,MAAAT,QAAA,cAMAd,EAAA+B,0BAAA,SAAAd,EAAAK,EAAAV,GAEA,GAMAuB,GAAArB,OANA,oLAYA,OAJAqB,GAAAC,KAAA,SAAAC,KAAA,UAAApB,EAAAQ,WACAU,EAAAC,KAAA,SAAAF,KAAA,UAAAjB,EAAAW,IAAAC,IACAM,EAAAC,KAAA,SAAAE,KAAA,SAAA1B,EAAA2B,0BAEAJ,GAMAnC,EAAAiC,0BAAA,SAAAO,EAAAvB,EAAAK,GAEA,GAAAmB,GAAAxB,EAAAW,IAAAX,EAAAW,IAAAX,EACAyB,QACA,IAAAF,EACA,CACA,GAAAG,GAAAC,kCAAAH,EAAAZ,EACAa,GAAA5B,OAAA,YAAA6B,EAAA,8BAGAD,GAAA5B,OAAA,gBAGA4B,GAAAG,KAAAJ,EAAAK,KACA,IAAAC,GAAA,+EAAAC,yBAAA,uCACAA,yBAAA,gBAGAC,EAAAnC,OAAAiC,EAGA,IAFAE,EAAA5B,OAAAqB,GAEApB,EACA,CACA,GAAA4B,GAAAlD,EAAAmD,eACAF,GAAA5B,OAAA6B,GACAD,EAAAG,SAAA,yCAGA,MAAAH,IAMAjD,EAAAmD,cAAA,WASA,MAAArC,QAPA,ySAUAd,EAAAqD,cAAA,SAAAC,GAEAxC,OAAA,4CAAAsB,KAAA,MAAAS,KAAAS,GACAxC,OAAA,4CAAAyC,YAAA,cAGAvD,EAAAwD,kBAAA,WAEA1C,OAAA,4CAAAsC,SAAA,cAIAK,GAAAC,QAAA3D","file":"app.bundle.js","sourcesContent":["webpackJsonpattachmentsUiHandler([0],[function(e,a){var t=new function(){var e=this;e._resizePublisher=function(){Sfdc&&Sfdc.canvas&&Sfdc.canvas.publisher&&Sfdc.canvas.publisher.resize({height:document.body.scrollHeight+\"px\"})},e._drawAttachments=function(a){var t=jQuery(\".attachemnts-handler-tbody-selector\");a.attachments.forEach(function(a){a.counter=e.counter++;var n=e._buildRow(a,!1);t.append(n)})},e._buildRow=function(a,t,n){var s=e._buildTableRow();if(drawCheckboxes()&&!t){a.isChecked&&n.selectedAttachmentsIds.push(a.att.Id);var r=e._buildTableColumnCheckbox(a,n);s.append(r)}var d=e._buildTableColumnFileName(!t,a,t);return drawCheckboxes()&&t&&d.attr(\"colspan\",\"2\"),s.append(d),t&&s.attr(\"data-counter\",n.counter++),s},e._buildTableRow=function(){return jQuery(\"<tr></tr>\")},e._buildTableColumnCheckbox=function(e,a,t){var n=jQuery(\"<td class='slds-cell-shrink'><label class='slds-checkbox'><input type='checkbox' name='options' id='checkbox-1' value='on'><span class='slds-checkbox--faux'></span></label></td>\");return n.find(\"input\").prop(\"checked\",e.isChecked),n.find(\"input\").attr(\"data-id\",e.att.Id),n.find(\"input\").bind(\"change\",t._handleLineItemSelection),n},e._buildTableColumnFileName=function(a,t,n){var s=t.att?t.att:t,r=void 0;if(a){var d=getRelatedAttachDownloadBaseUrl()+s.Id;r=jQuery(\"<a href='\"+d+\"' target='_blank'></a>\")}else r=jQuery(\"<span></span>\");r.text(s.Name);var i=\"<td class='attachemnts-handler-file-name-container' scope='row' data-label='\"+getAttachmentFileLabel()+\"'><div class='slds-truncate' title='\"+getAttachmentFileLabel()+\"'></div></td>\",l=jQuery(i);if(l.append(r),n){var c=e._buildSpinner();l.append(c),l.addClass(\"attachemnts-handler-item-is-uploading\")}return l},e._buildSpinner=function(){return jQuery(\"<div class='slds-spinner-custom_container slds-float--right attachemnts-handler-item-spinner'><div role='status' class='slds-spinner slds-spinner--small'><span class='slds-assistive-text'>Loading</span><div class='slds-spinner__dot-a'></div><div class='slds-spinner__dot-b'></div></div></div>\")},e._showErrorMsg=function(e){jQuery(\".attachemnts-handler-error-msg-container\").find(\"h2\").text(e),jQuery(\".attachemnts-handler-error-msg-container\").toggleClass(\"slds-hide\")},e._hideErrorMessage=function(){jQuery(\".attachemnts-handler-error-msg-container\").addClass(\"slds-hide\")}};e.exports=t}],[0]);\n\n\n// WEBPACK FOOTER //\n// app.bundle.js","/**\n*  @description Responsible forthe UI part of the attachments handler.\n*  @author ypa\n*  @copyright PARX Werk AG\n*/\nvar attachmentsUiHandler = new function()\n{\n\tvar self = this;\n\n\t/*\n\t*   @description US282. if it's the communication inteface.\n\t*/\n\tself._resizePublisher = function()\n\t{\n\t\tif (Sfdc && Sfdc.canvas && Sfdc.canvas.publisher)\n\t\t{\n\t\t\tSfdc.canvas.publisher.resize( { height : (document.body.scrollHeight) + 'px' } );\n\t\t}\n\t}\n\n\t/*\n\t*   @description US282. Creates and pushes rows with attachments related info.\n\t*/\n\tself._drawAttachments = function(handler)\n\t{\n\t\tvar tbody = jQuery(\".attachemnts-handler-tbody-selector\");\n\t\thandler.attachments.forEach(function(attachmentWrapper)\n\t\t{\n\t\t\t//To be able to maintain the same order of line items after rerendering.\n\t\t\tattachmentWrapper.counter = self.counter++;\n\n\t\t\tvar row = self._buildRow(attachmentWrapper, false);\n\n\t\t\ttbody.append(row);\n\t\t});\n\t}\n\n\t/*\n\t*   @description US282. Creates and pushes a row with an attachment related info.\n\t*/\n\tself._buildRow = function(attachmentWrapper, isUploading, handler)\n\t{\n\t\tvar row = self._buildTableRow();\n\t\tif (drawCheckboxes() && !isUploading)\n\t\t{\n\t\t\tif (attachmentWrapper.isChecked)\n\t\t\t{\n\t\t\t\thandler.selectedAttachmentsIds.push(attachmentWrapper.att.Id);\n\t\t\t}\n\t\t\tvar checkbox = self._buildTableColumnCheckbox(attachmentWrapper, handler);\n\t\t\trow.append(checkbox);\n\t\t}\n\n\t\tvar fileNameColumn = self._buildTableColumnFileName(!isUploading, attachmentWrapper, isUploading);\n\t\tif (drawCheckboxes() && isUploading)\n\t\t{\n\t\t\tfileNameColumn.attr(\"colspan\", \"2\");\n\t\t}\n\t\trow.append(fileNameColumn);\n\n\t\t//To maintain the same order of line items after rerendering.\n\t\tif (isUploading)\n\t\t{\n\t\t\trow.attr(\"data-counter\", handler.counter++);\n\t\t}\n\n\t\treturn row;\n\t}\n\n\t/*\n\t*   @description US282. Creates html tr element.\n\t*/\n\tself._buildTableRow = function()\n\t{\n\t\treturn jQuery(\"<tr></tr>\");\n\t}\n\n\t/*\n\t*   @description US282. Creates html td element with a nested checkbox.\n\t*/\n\tself._buildTableColumnCheckbox = function(attachmentWrapper, isUploading, handler)\n\t{\n\t\tvar innerHtml = \"<td class='slds-cell-shrink'>\" +\n\t\t\t\t\t\t\t\"<label class='slds-checkbox'>\" +\n\t\t\t\t\t\t\t\t\"<input type='checkbox' name='options' id='checkbox-1' value='on'>\" + \n\t\t\t\t\t\t\t\t\"<span class='slds-checkbox--faux'></span>\" +\n\t\t\t\t\t\t\t\"</label>\" +\n\t\t\t\t\t\t\"</td>\";\n\t\tvar td = jQuery(innerHtml);\n\n\t\ttd.find(\"input\").prop(\"checked\", attachmentWrapper.isChecked);\n\t\ttd.find(\"input\").attr(\"data-id\", attachmentWrapper.att.Id);\n\t\ttd.find(\"input\").bind(\"change\", handler._handleLineItemSelection);\n\n\t\treturn td;\n\t}\n\n\t/*\n\t*   @description US282. Creates html td element with a download link or a plain text file name(if the file is uploading).\n\t*/\n\tself._buildTableColumnFileName = function(asLink, attachmentWrapper, isUploading)\n\t{\n\t\tvar attachment = attachmentWrapper.att ? attachmentWrapper.att : attachmentWrapper;\n\t\tvar fileNameMarkup = undefined;\n\t\tif (asLink)\n\t\t{\n\t\t\tvar url = getRelatedAttachDownloadBaseUrl() + attachment.Id;\n\t\t\tfileNameMarkup = jQuery(\"<a href='\" + url + \"' target='_blank'></a>\");\n\t\t} else \n\t\t{\n\t\t\tfileNameMarkup = jQuery(\"<span></span>\");\n\t\t}\n\t\t\n\t\tfileNameMarkup.text(attachment.Name);\n\t\tvar innerHtml = \"<td class='attachemnts-handler-file-name-container' scope='row' data-label='\" + getAttachmentFileLabel() + \"'>\" +\n\t\t\t\t\t\t\t\"<div class='slds-truncate' title='\" + getAttachmentFileLabel() + \"'>\" +\n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"</td>\";\n\t\tvar container = jQuery(innerHtml);\n\t\tcontainer.append(fileNameMarkup);\n\n\t\tif (isUploading)\n\t\t{\n\t\t\tvar spinner = self._buildSpinner();\n\t\t\tcontainer.append(spinner);\n\t\t\tcontainer.addClass(\"attachemnts-handler-item-is-uploading\");\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/*\n\t*   @description US282. Creates a spinner to be able to indicate that an attachments is uploading.\n\t*/\n\tself._buildSpinner = function()\n\t{\n\t\tvar innerHtml = \"<div class='slds-spinner-custom_container slds-float--right attachemnts-handler-item-spinner'>\" +\n\t\t\t\t\t\t\t\"<div role='status' class='slds-spinner slds-spinner--small'>\" +\n\t\t\t\t\t\t\t\t\"<span class='slds-assistive-text'>Loading</span>\" + \n\t\t\t\t\t\t\t\t\"<div class='slds-spinner__dot-a'></div>\" +\n\t\t\t\t\t\t\t\t\"<div class='slds-spinner__dot-b'></div>\" + \n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"</div>\";\n\t\treturn jQuery(innerHtml);\n\t}\n\n\tself._showErrorMsg = function(message)\n\t{\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").find(\"h2\").text(message);\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").toggleClass(\"slds-hide\");\n\t}\n\n\tself._hideErrorMessage = function()\n\t{\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").addClass(\"slds-hide\");\n\t}\n}\n\nmodule.exports = attachmentsUiHandler;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attachmentsUiHandler.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}