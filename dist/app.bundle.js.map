{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0adc190af55bb3c29899","webpack:///./src/attachmentsUiHandler.js"],"names":["root","factory","self","this","e","__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","attachmentsUiHandler","_resizePublisher","Sfdc","canvas","publisher","resize","height","document","body","scrollHeight","_drawAttachments","handler","tbody","jQuery","attachments","forEach","attachmentWrapper","counter","row","_buildRow","append","isUploading","_buildTableRow","drawCheckboxes","isChecked","selectedAttachmentsIds","push","att","Id","checkbox","_buildTableColumnCheckbox","fileNameColumn","_buildTableColumnFileName","attr","td","find","prop","bind","_handleLineItemSelection","asLink","attachment","fileNameMarkup","url","getRelatedAttachDownloadBaseUrl","text","Name","innerHtml","getAttachmentFileLabel","container","spinner","_buildSpinner","addClass","_showErrorMsg","message","toggleClass","_hideErrorMessage","define","amd"],"mappings":"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","file":"app.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"attachmentsUiHandler\"] = factory();\n\telse\n\t\troot[\"attachmentsUiHandler\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0adc190af55bb3c29899","/**\n*  @description Responsible forthe UI part of the attachments handler.\n*  @author ypa\n*  @copyright PARX Werk AG\n*/\nvar attachmentsUiHandler = new function()\n{\n\tvar self = this;\n\n\t/*\n\t*   @description US282. if it's the communication inteface.\n\t*/\n\tself._resizePublisher = function()\n\t{\n\t\tif (Sfdc && Sfdc.canvas && Sfdc.canvas.publisher)\n\t\t{\n\t\t\tSfdc.canvas.publisher.resize( { height : (document.body.scrollHeight) + 'px' } );\n\t\t}\n\t}\n\n\t/*\n\t*   @description US282. Creates and pushes rows with attachments related info.\n\t*/\n\tself._drawAttachments = function(handler)\n\t{\n\t\tvar tbody = jQuery(\".attachemnts-handler-tbody-selector\");\n\t\thandler.attachments.forEach(function(attachmentWrapper)\n\t\t{\n\t\t\t//To be able to maintain the same order of line items after rerendering.\n\t\t\tattachmentWrapper.counter = self.counter++;\n\n\t\t\tvar row = self._buildRow(attachmentWrapper, false);\n\n\t\t\ttbody.append(row);\n\t\t});\n\t}\n\n\t/*\n\t*   @description US282. Creates and pushes a row with an attachment related info.\n\t*/\n\tself._buildRow = function(attachmentWrapper, isUploading, handler)\n\t{\n\t\tvar row = self._buildTableRow();\n\t\tif (drawCheckboxes() && !isUploading)\n\t\t{\n\t\t\tif (attachmentWrapper.isChecked)\n\t\t\t{\n\t\t\t\thandler.selectedAttachmentsIds.push(attachmentWrapper.att.Id);\n\t\t\t}\n\t\t\tvar checkbox = self._buildTableColumnCheckbox(attachmentWrapper, handler);\n\t\t\trow.append(checkbox);\n\t\t}\n\n\t\tvar fileNameColumn = self._buildTableColumnFileName(!isUploading, attachmentWrapper, isUploading);\n\t\tif (drawCheckboxes() && isUploading)\n\t\t{\n\t\t\tfileNameColumn.attr(\"colspan\", \"2\");\n\t\t}\n\t\trow.append(fileNameColumn);\n\n\t\t//To maintain the same order of line items after rerendering.\n\t\tif (isUploading)\n\t\t{\n\t\t\trow.attr(\"data-counter\", handler.counter++);\n\t\t}\n\n\t\treturn row;\n\t}\n\n\t/*\n\t*   @description US282. Creates html tr element.\n\t*/\n\tself._buildTableRow = function()\n\t{\n\t\treturn jQuery(\"<tr></tr>\");\n\t}\n\n\t/*\n\t*   @description US282. Creates html td element with a nested checkbox.\n\t*/\n\tself._buildTableColumnCheckbox = function(attachmentWrapper, isUploading, handler)\n\t{\n\t\tvar innerHtml = \"<td class='slds-cell-shrink'>\" +\n\t\t\t\t\t\t\t\"<label class='slds-checkbox'>\" +\n\t\t\t\t\t\t\t\t\"<input type='checkbox' name='options' id='checkbox-1' value='on'>\" + \n\t\t\t\t\t\t\t\t\"<span class='slds-checkbox--faux'></span>\" +\n\t\t\t\t\t\t\t\"</label>\" +\n\t\t\t\t\t\t\"</td>\";\n\t\tvar td = jQuery(innerHtml);\n\n\t\ttd.find(\"input\").prop(\"checked\", attachmentWrapper.isChecked);\n\t\ttd.find(\"input\").attr(\"data-id\", attachmentWrapper.att.Id);\n\t\ttd.find(\"input\").bind(\"change\", handler._handleLineItemSelection);\n\n\t\treturn td;\n\t}\n\n\t/*\n\t*   @description US282. Creates html td element with a download link or a plain text file name(if the file is uploading).\n\t*/\n\tself._buildTableColumnFileName = function(asLink, attachmentWrapper, isUploading)\n\t{\n\t\tvar attachment = attachmentWrapper.att ? attachmentWrapper.att : attachmentWrapper;\n\t\tvar fileNameMarkup = undefined;\n\t\tif (asLink)\n\t\t{\n\t\t\tvar url = getRelatedAttachDownloadBaseUrl() + attachment.Id;\n\t\t\tfileNameMarkup = jQuery(\"<a href='\" + url + \"' target='_blank'></a>\");\n\t\t} else \n\t\t{\n\t\t\tfileNameMarkup = jQuery(\"<span></span>\");\n\t\t}\n\t\t\n\t\tfileNameMarkup.text(attachment.Name);\n\t\tvar innerHtml = \"<td class='attachemnts-handler-file-name-container' scope='row' data-label='\" + getAttachmentFileLabel() + \"'>\" +\n\t\t\t\t\t\t\t\"<div class='slds-truncate' title='\" + getAttachmentFileLabel() + \"'>\" +\n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"</td>\";\n\t\tvar container = jQuery(innerHtml);\n\t\tcontainer.append(fileNameMarkup);\n\n\t\tif (isUploading)\n\t\t{\n\t\t\tvar spinner = self._buildSpinner();\n\t\t\tcontainer.append(spinner);\n\t\t\tcontainer.addClass(\"attachemnts-handler-item-is-uploading\");\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/*\n\t*   @description US282. Creates a spinner to be able to indicate that an attachments is uploading.\n\t*/\n\tself._buildSpinner = function()\n\t{\n\t\tvar innerHtml = \"<div class='slds-spinner-custom_container slds-float--right attachemnts-handler-item-spinner'>\" +\n\t\t\t\t\t\t\t\"<div role='status' class='slds-spinner slds-spinner--small'>\" +\n\t\t\t\t\t\t\t\t\"<span class='slds-assistive-text'>Loading</span>\" + \n\t\t\t\t\t\t\t\t\"<div class='slds-spinner__dot-a'></div>\" +\n\t\t\t\t\t\t\t\t\"<div class='slds-spinner__dot-b'></div>\" + \n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"</div>\";\n\t\treturn jQuery(innerHtml);\n\t}\n\n\tself._showErrorMsg = function(message)\n\t{\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").find(\"h2\").text(message);\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").toggleClass(\"slds-hide\");\n\t}\n\n\tself._hideErrorMessage = function()\n\t{\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").addClass(\"slds-hide\");\n\t}\n}\n\nmodule.exports = attachmentsUiHandler;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attachmentsUiHandler.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}