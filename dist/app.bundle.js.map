{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/attachmentsUiHandler.js"],"names":["root","factory","self","this","webpackJsonpattachmentsUiHandler","e","t","attachmentsUiHandler","_resizePublisher","Sfdc","canvas","publisher","resize","height","document","body","scrollHeight","_drawAttachments","handler","tbody","jQuery","attachments","forEach","attachmentWrapper","counter","row","_buildRow","append","isUploading","_buildTableRow","drawCheckboxes","isChecked","selectedAttachmentsIds","push","att","Id","checkbox","_buildTableColumnCheckbox","fileNameColumn","_buildTableColumnFileName","attr","td","find","prop","bind","_handleLineItemSelection","asLink","attachment","fileNameMarkup","url","getRelatedAttachDownloadBaseUrl","text","Name","innerHtml","getAttachmentFileLabel","container","spinner","_buildSpinner","addClass","_showErrorMsg","message","toggleClass","_hideErrorMessage","module","exports","define","amd"],"mappings":"AAAA,GAAAA,GAAAC,CAAAD,GASC,mBAAAE,WAAAC,KATDF,EASC,WACD,MAAAG,mCAAA,aAAAC,EAAAC,GCLA,GAAAC,GAAA,eAEA,GAAAL,GAAAC,IAKAD,GAAAM,iBAAA,WAEAC,WAAAC,QAAAD,KAAAC,OAAAC,WAEAF,KAAAC,OAAAC,UAAAC,QAAkCC,OAAAC,SAAAC,KAAAC,aAAA,QAOlCd,EAAAe,iBAAA,SAAAC,GAEA,GAAAC,GAAAC,OAAA,sCACAF,GAAAG,YAAAC,QAAA,SAAAC,GAGAA,EAAAC,QAAAtB,EAAAsB,SAEA,IAAAC,GAAAvB,EAAAwB,UAAAH,KAEAJ,GAAAQ,OAAAF,MAOAvB,EAAAwB,UAAA,SAAAH,EAAAK,EAAAV,GAEA,GAAAO,GAAAvB,EAAA2B,gBACA,IAAAC,mBAAAF,EACA,CACAL,EAAAQ,WAEAb,EAAAc,uBAAAC,KAAAV,EAAAW,IAAAC,GAEA,IAAAC,GAAAlC,EAAAmC,0BAAAd,EAAAL,EACAO,GAAAE,OAAAS,GAGA,GAAAE,GAAApC,EAAAqC,2BAAAX,EAAAL,EAAAK,EAaA,OAZAE,mBAAAF,GAEAU,EAAAE,KAAA,eAEAf,EAAAE,OAAAW,GAGAV,GAEAH,EAAAe,KAAA,eAAAtB,EAAAM,WAGAC,GAMAvB,EAAA2B,eAAA,WAEA,MAAAT,QAAA,cAMAlB,EAAAmC,0BAAA,SAAAd,EAAAK,EAAAV,GAEA,GAMAuB,GAAArB,OANA,oLAYA,OAJAqB,GAAAC,KAAA,SAAAC,KAAA,UAAApB,EAAAQ,WACAU,EAAAC,KAAA,SAAAF,KAAA,UAAAjB,EAAAW,IAAAC,IACAM,EAAAC,KAAA,SAAAE,KAAA,SAAA1B,EAAA2B,0BAEAJ,GAMAvC,EAAAqC,0BAAA,SAAAO,EAAAvB,EAAAK,GAEA,GAAAmB,GAAAxB,EAAAW,IAAAX,EAAAW,IAAAX,EACAyB,QACA,IAAAF,EACA,CACA,GAAAG,GAAAC,kCAAAH,EAAAZ,EACAa,GAAA5B,OAAA,YAAA6B,EAAA,8BAGAD,GAAA5B,OAAA,gBAGA4B,GAAAG,KAAAJ,EAAAK,KACA,IAAAC,GAAA,+EAAAC,yBAAA,uCACAA,yBAAA,gBAGAC,EAAAnC,OAAAiC,EAGA,IAFAE,EAAA5B,OAAAqB,GAEApB,EACA,CACA,GAAA4B,GAAAtD,EAAAuD,eACAF,GAAA5B,OAAA6B,GACAD,EAAAG,SAAA,yCAGA,MAAAH,IAMArD,EAAAuD,cAAA,WASA,MAAArC,QAPA,ySAUAlB,EAAAyD,cAAA,SAAAC,GAEAxC,OAAA,4CAAAsB,KAAA,MAAAS,KAAAS,GACAxC,OAAA,4CAAAyC,YAAA,cAGA3D,EAAA4D,kBAAA,WAEA1C,OAAA,4CAAAsC,SAAA,cAIAK,GAAAC,QAAAzD,UD7JA,gBAAAyD,UAAA,gBAAAD,QACAA,OAAAC,QAAA/D,IACA,kBAAAgE,gBAAAC,IACAD,UAAAhE,GACA,gBAAA+D,SACAA,QAAAzD,qBAAAN,IAEAD,EAAAO,qBAAAN","file":"app.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"attachmentsUiHandler\"] = factory();\n\telse\n\t\troot[\"attachmentsUiHandler\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/**\n*  @description Responsible forthe UI part of the attachments handler.\n*  @author ypa\n*  @copyright PARX Werk AG\n*/\nvar attachmentsUiHandler = new function()\n{\n\tvar self = this;\n\n\t/*\n\t*   @description US282. if it's the communication inteface.\n\t*/\n\tself._resizePublisher = function()\n\t{\n\t\tif (Sfdc && Sfdc.canvas && Sfdc.canvas.publisher)\n\t\t{\n\t\t\tSfdc.canvas.publisher.resize( { height : (document.body.scrollHeight) + 'px' } );\n\t\t}\n\t}\n\n\t/*\n\t*   @description US282. Creates and pushes rows with attachments related info.\n\t*/\n\tself._drawAttachments = function(handler)\n\t{\n\t\tvar tbody = jQuery(\".attachemnts-handler-tbody-selector\");\n\t\thandler.attachments.forEach(function(attachmentWrapper)\n\t\t{\n\t\t\t//To be able to maintain the same order of line items after rerendering.\n\t\t\tattachmentWrapper.counter = self.counter++;\n\n\t\t\tvar row = self._buildRow(attachmentWrapper, false);\n\n\t\t\ttbody.append(row);\n\t\t});\n\t}\n\n\t/*\n\t*   @description US282. Creates and pushes a row with an attachment related info.\n\t*/\n\tself._buildRow = function(attachmentWrapper, isUploading, handler)\n\t{\n\t\tvar row = self._buildTableRow();\n\t\tif (drawCheckboxes() && !isUploading)\n\t\t{\n\t\t\tif (attachmentWrapper.isChecked)\n\t\t\t{\n\t\t\t\thandler.selectedAttachmentsIds.push(attachmentWrapper.att.Id);\n\t\t\t}\n\t\t\tvar checkbox = self._buildTableColumnCheckbox(attachmentWrapper, handler);\n\t\t\trow.append(checkbox);\n\t\t}\n\n\t\tvar fileNameColumn = self._buildTableColumnFileName(!isUploading, attachmentWrapper, isUploading);\n\t\tif (drawCheckboxes() && isUploading)\n\t\t{\n\t\t\tfileNameColumn.attr(\"colspan\", \"2\");\n\t\t}\n\t\trow.append(fileNameColumn);\n\n\t\t//To maintain the same order of line items after rerendering.\n\t\tif (isUploading)\n\t\t{\n\t\t\trow.attr(\"data-counter\", handler.counter++);\n\t\t}\n\n\t\treturn row;\n\t}\n\n\t/*\n\t*   @description US282. Creates html tr element.\n\t*/\n\tself._buildTableRow = function()\n\t{\n\t\treturn jQuery(\"<tr></tr>\");\n\t}\n\n\t/*\n\t*   @description US282. Creates html td element with a nested checkbox.\n\t*/\n\tself._buildTableColumnCheckbox = function(attachmentWrapper, isUploading, handler)\n\t{\n\t\tvar innerHtml = \"<td class='slds-cell-shrink'>\" +\n\t\t\t\t\t\t\t\"<label class='slds-checkbox'>\" +\n\t\t\t\t\t\t\t\t\"<input type='checkbox' name='options' id='checkbox-1' value='on'>\" + \n\t\t\t\t\t\t\t\t\"<span class='slds-checkbox--faux'></span>\" +\n\t\t\t\t\t\t\t\"</label>\" +\n\t\t\t\t\t\t\"</td>\";\n\t\tvar td = jQuery(innerHtml);\n\n\t\ttd.find(\"input\").prop(\"checked\", attachmentWrapper.isChecked);\n\t\ttd.find(\"input\").attr(\"data-id\", attachmentWrapper.att.Id);\n\t\ttd.find(\"input\").bind(\"change\", handler._handleLineItemSelection);\n\n\t\treturn td;\n\t}\n\n\t/*\n\t*   @description US282. Creates html td element with a download link or a plain text file name(if the file is uploading).\n\t*/\n\tself._buildTableColumnFileName = function(asLink, attachmentWrapper, isUploading)\n\t{\n\t\tvar attachment = attachmentWrapper.att ? attachmentWrapper.att : attachmentWrapper;\n\t\tvar fileNameMarkup = undefined;\n\t\tif (asLink)\n\t\t{\n\t\t\tvar url = getRelatedAttachDownloadBaseUrl() + attachment.Id;\n\t\t\tfileNameMarkup = jQuery(\"<a href='\" + url + \"' target='_blank'></a>\");\n\t\t} else \n\t\t{\n\t\t\tfileNameMarkup = jQuery(\"<span></span>\");\n\t\t}\n\t\t\n\t\tfileNameMarkup.text(attachment.Name);\n\t\tvar innerHtml = \"<td class='attachemnts-handler-file-name-container' scope='row' data-label='\" + getAttachmentFileLabel() + \"'>\" +\n\t\t\t\t\t\t\t\"<div class='slds-truncate' title='\" + getAttachmentFileLabel() + \"'>\" +\n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"</td>\";\n\t\tvar container = jQuery(innerHtml);\n\t\tcontainer.append(fileNameMarkup);\n\n\t\tif (isUploading)\n\t\t{\n\t\t\tvar spinner = self._buildSpinner();\n\t\t\tcontainer.append(spinner);\n\t\t\tcontainer.addClass(\"attachemnts-handler-item-is-uploading\");\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/*\n\t*   @description US282. Creates a spinner to be able to indicate that an attachments is uploading.\n\t*/\n\tself._buildSpinner = function()\n\t{\n\t\tvar innerHtml = \"<div class='slds-spinner-custom_container slds-float--right attachemnts-handler-item-spinner'>\" +\n\t\t\t\t\t\t\t\"<div role='status' class='slds-spinner slds-spinner--small'>\" +\n\t\t\t\t\t\t\t\t\"<span class='slds-assistive-text'>Loading</span>\" + \n\t\t\t\t\t\t\t\t\"<div class='slds-spinner__dot-a'></div>\" +\n\t\t\t\t\t\t\t\t\"<div class='slds-spinner__dot-b'></div>\" + \n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"</div>\";\n\t\treturn jQuery(innerHtml);\n\t}\n\n\tself._showErrorMsg = function(message)\n\t{\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").find(\"h2\").text(message);\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").toggleClass(\"slds-hide\");\n\t}\n\n\tself._hideErrorMessage = function()\n\t{\n\t\tjQuery(\".attachemnts-handler-error-msg-container\").addClass(\"slds-hide\");\n\t}\n}\n\nmodule.exports = attachmentsUiHandler;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/attachmentsUiHandler.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}